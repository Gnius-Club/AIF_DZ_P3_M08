<!DOCTYPE html>
<html lang="es-MX">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Reportero Estrella: Edici√≥n Kids</title>
<style>
  /* ===================== ESTILOS VISUALES (KIDS) ===================== */
  @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap');

  :root{
    --bg-pattern: #f0f8ff;
    --primary: #4cc9f0; /* Azul brillante */
    --secondary: #f72585; /* Rosa chicle */
    --accent: #ffd166; /* Amarillo */
    --dark: #2b2d42;
    --success: #06d6a0;
    --font: 'Fredoka', system-ui, sans-serif; /* Fuente amigable */
  }
  
  body{
    margin:0; background-color: var(--bg-pattern);
    color:var(--dark); font-family:var(--font); overflow:hidden; user-select:none;
    /* Patr√≥n de fondo estilo libreta */
    background-image: radial-gradient(#cbd5e1 2px, transparent 2px);
    background-size: 24px 24px;
  }
  
  #app{ display:flex; flex-direction:column; height:100dvh; }

  /* --- HEADER DIVERTIDO --- */
  header{
    background:#fff; padding:15px 20px; 
    border-bottom: 5px solid var(--dark);
    display:flex; align-items:center; justify-content:space-between; 
    box-shadow: 0 5px 0 rgba(0,0,0,0.1); z-index:10;
  }
  .logo { font-size: 1.5rem; font-weight: 600; color: var(--secondary); text-transform: uppercase; letter-spacing: 1px; }
  .score-board { background: var(--accent); padding: 5px 15px; border-radius: 20px; border: 3px solid var(--dark); font-weight: bold; }
  
  /* --- √ÅREA DE JUEGO --- */
  #game-area{
    flex:1; position:relative; 
    display:grid; grid-template-columns: 110px 1fr 150px; 
    align-items:center; padding:10px; gap: 10px;
  }

  /* 1. BARRA IZQUIERDA (HERRAMIENTAS) */
  .sidebar-left{
    display:flex; flex-direction:column; gap:25px; align-items:center; z-index: 20;
  }
  .tool-btn{
    width:85px; height:85px;
    background:#fff; border:4px solid var(--dark); border-radius:50%;
    font-size:40px; cursor:pointer;
    display:grid; place-items:center;
    box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); /* Rebote */
    position: relative;
  }
  .tool-btn:hover { transform: scale(1.1) rotate(5deg); background: #fdfdfd; }
  .tool-btn:active{ transform:scale(0.9); box-shadow: 2px 2px 0 rgba(0,0,0,0.2); }
  
  .tool-label{ 
    position: absolute; bottom: -12px;
    font-size:12px; font-weight:bold; background:var(--accent); 
    padding:4px 8px; border-radius:12px; border:2px solid var(--dark);
    white-space: nowrap;
  }

  /* 2. CENTRO (TARJETA) */
  .center-stage{
    display:flex; justify-content:center; align-items:center; height:100%; z-index: 10;
    perspective: 1000px;
  }
  .card{
    width: 320px; min-height: 420px;
    background: #fff; border: 4px solid var(--dark); border-radius: 20px;
    padding: 25px; padding-bottom: 70px;
    display: flex; flex-direction: column; gap: 15px;
    box-shadow: 10px 10px 0 rgba(0,0,0,0.15);
    position: relative; cursor: grab;
    transform-origin: center;
  }
  /* Decoraci√≥n de "Clip" o cinta en la tarjeta */
  .card::before {
    content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
    width: 40px; height: 60px; background: rgba(0,0,0,0.1); border-radius: 20px; z-index: -1;
  }
  .card::after {
    content: ''; position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
    width: 100px; height: 25px; background: var(--secondary); opacity: 0.8;
    transform: translateX(-50%) rotate(-2deg); border: 2px solid rgba(0,0,0,0.1);
  }

  .card.dragging{ cursor: grabbing; transform: scale(1.05) rotate(3deg); z-index: 9999; }
  .card.selected { border-color: var(--secondary); box-shadow: 0 0 0 8px rgba(247, 37, 133, 0.3); }

  .card-header { 
    font-weight:900; text-transform:uppercase; 
    border-bottom:3px dashed #ddd; padding-bottom:10px; 
    color: var(--secondary); font-size: 1rem; letter-spacing: 1px;
  }
  .card-body { 
    font-size: 1.6rem; line-height: 1.3; font-weight: 600; color: #333;
    flex:1; display:flex; align-items:center; text-align: center;
  }

  /* SELLO */
  .stamp {
    position: absolute; bottom: 20px; right: 20px;
    border: 5px solid; padding: 5px 15px; border-radius: 12px;
    font-weight: 900; font-size: 26px; text-transform: uppercase;
    transform: rotate(-15deg) scale(0); opacity: 0;
    transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none;
    background: rgba(255,255,255,0.9);
  }
  .stamp.show { transform: rotate(-10deg) scale(1); opacity: 1; }
  .stamp.hecho { color: var(--success); border-color: var(--success); }
  .stamp.opinion { color: var(--accent); border-color: var(--accent); color: #d68c00; border-color:#d68c00; } /* Ajuste contraste */
  .stamp.falsa { color: var(--secondary); border-color: var(--secondary); }

  /* 3. BARRA DERECHA (BANDEJAS) */
  .sidebar-right{
    display:flex; flex-direction:column; gap:20px; align-items:center; z-index: 20;
  }
  .bin {
    width: 100%; padding: 15px 5px;
    border: 4px dashed #aaa; border-radius: 16px; background: rgba(255,255,255,0.7);
    text-align: center; font-weight: bold; font-size: 0.95rem; cursor: pointer;
    transition: 0.2s; position: relative;
  }
  /* Iconos de bandeja */
  .bin-icon { font-size: 2rem; display: block; margin-bottom: 5px; }
  
  .bin:hover, .bin.active { 
    background: #fff; border-style: solid; transform: scale(1.05); 
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  }
  .bin[id$="hecho"].active { border-color: var(--success); background: #e0fff4; }
  .bin[id$="opinion"].active { border-color: var(--accent); background: #fffbe6; }
  .bin[id$="falsa"].active { border-color: var(--secondary); background: #ffe6f0; }

  /* --- TUTORIAL & MODALES --- */
  #dark-overlay {
    position: fixed; inset: 0; background: rgba(43, 45, 66, 0.85); z-index: 1000;
    display: none; 
  }
  .spotlight {
    position: relative; z-index: 1001 !important;
    background: #fff;
    box-shadow: 0 0 0 100vmax rgba(43, 45, 66, 0.85);
    pointer-events: auto !important;
    border-radius: 20px;
  }

  /* Caja de texto del tutorial (Estilo comic) */
  #tuto-box {
    position: fixed; bottom: 15%; left: 50%; transform: translateX(-50%);
    background: #fff; padding: 25px; border-radius: 20px; border: 4px solid var(--dark);
    width: 90%; max-width: 450px; text-align: center; z-index: 1002;
    display: none; box-shadow: 10px 10px 0 rgba(0,0,0,0.2);
  }
  .tuto-arrow { font-size: 50px; position: absolute; animation: bounce 1s infinite; z-index: 1003; display:none; color: #fff; text-shadow: 0 4px 0 #000;}
  @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-15px)} }

  /* BURBUJAS DE PISTA (Estilo chat) */
  .bubble {
    position: absolute; left: 95px; top: 0; width: 200px;
    background: var(--dark); color: #fff; padding: 15px; border-radius: 0 15px 15px 15px;
    font-size: 1rem; z-index: 1005; opacity: 0; pointer-events: none; transition: opacity 0.3s;
    box-shadow: 5px 5px 0 rgba(0,0,0,0.2); line-height: 1.4;
  }
  .bubble.show { opacity: 1; top: 10px; }

  /* MODAL INICIO/FIN */
  #modal-screen {
    position: fixed; inset:0; background: var(--primary); z-index: 2000;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    text-align: center; color: #fff;
    background-image: radial-gradient(circle, rgba(255,255,255,0.2) 2px, transparent 2px);
    background-size: 30px 30px;
  }
  .modal-card {
    background: #fff; color: var(--dark); padding: 40px; border-radius: 30px;
    border: 5px solid var(--dark); box-shadow: 15px 15px 0 rgba(0,0,0,0.2);
    max-width: 90%; width: 500px;
  }
  .big-btn {
    background: var(--secondary); color:#fff; padding:15px 40px; font-size:1.5rem;
    border:4px solid var(--dark); border-radius:50px; cursor:pointer; font-weight:bold;
    margin-top: 20px; box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
    transition: transform 0.1s; display: inline-block;
  }
  .big-btn:active { transform: translate(3px, 3px); box-shadow: 2px 2px 0 rgba(0,0,0,0.3); }

  /* Confeti */
  .confetti { position: fixed; width: 12px; height: 12px; z-index: 3000; animation: fall linear forwards; }
  @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }

  /* Media query para m√≥viles peque√±os */
  @media (max-width: 600px) {
    #game-area { grid-template-columns: 80px 1fr 80px; gap: 5px; }
    .tool-btn { width: 60px; height: 60px; font-size: 30px; }
    .tool-label { font-size: 9px; }
    .card { min-height: 300px; width: 100%; padding: 15px; }
    .card-body { font-size: 1.2rem; }
    .bin { font-size: 0.8rem; padding: 10px 2px; }
    .bin-icon { font-size: 1.5rem; }
  }

</style>
</head>
<body>

<header>
  <div class="logo">üì∞ Reportero<span style="color:var(--primary)">Kids</span></div>
  <div class="score-board">‚≠ê Puntos: <span id="score">0</span></div>
</header>

<div id="app">
  <div id="game-area">
    
    <!-- BARRA IZQUIERDA -->
    <div id="tool-bar" class="sidebar-left">
      <div style="position:relative">
        <div id="btn-source" class="tool-btn">üîé</div>
        <div class="tool-label">FUENTE</div>
        <div id="bub-source" class="bubble">...</div>
      </div>
      <div style="position:relative">
        <div id="btn-evidence" class="tool-btn">‚öñÔ∏è</div>
        <div class="tool-label">PRUEBAS</div>
        <div id="bub-evidence" class="bubble">...</div>
      </div>
      <div style="position:relative">
        <div id="btn-intent" class="tool-btn">üéØ</div>
        <div class="tool-label">INTENCI√ìN</div>
        <div id="bub-intent" class="bubble">...</div>
      </div>
    </div>

    <!-- CENTRO -->
    <div class="center-stage">
      <div id="card" class="card">
        <div class="card-header">üìå Caso #<span id="case-num">0</span></div>
        <div id="card-text" class="card-body">...</div>
        <div id="stamp" class="stamp">HECHO</div>
      </div>
    </div>

    <!-- BARRA DERECHA -->
    <div id="bin-bar" class="sidebar-right">
      <div id="bin-hecho" class="bin" onclick="manualClassify('HECHO')">
        <span class="bin-icon">‚úÖ</span>VERDAD
      </div>
      <div id="bin-opinion" class="bin" onclick="manualClassify('OPINION')">
        <span class="bin-icon">ü§î</span>OPINI√ìN
      </div>
      <div id="bin-falsa" class="bin" onclick="manualClassify('FALSA')">
        <span class="bin-icon">üóëÔ∏è</span>MENTIRA
      </div>
    </div>

  </div>
</div>

<!-- CAPAS DE TUTORIAL -->
<div id="dark-overlay"></div>

<div id="tuto-box">
  <h2 id="tuto-title" style="margin:0 0 10px 0; color:var(--secondary)">T√≠tulo</h2>
  <p id="tuto-msg" style="font-size: 1.2rem; margin:0 0 20px 0">Instrucci√≥n</p>
  <button id="tuto-btn" class="big-btn" style="padding:10px 25px; font-size:1.2rem; margin:0;">¬°Entendido!</button>
</div>

<div id="tuto-arrow" class="tuto-arrow">üëà</div>

<!-- MODAL INICIO/FIN -->
<div id="modal-screen">
  <div class="modal-card">
    <div style="font-size:80px">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
    <h1 style="margin:10px 0; color:var(--dark)">¬°Hola Reportero!</h1>
    <p style="font-size:1.2rem; line-height:1.5">Tu misi√≥n es descubrir la verdad.<br>Separa los Hechos, las Opiniones y las Mentiras.</p>
    <button class="big-btn" onclick="initGame()">¬°Empezar Misi√≥n!</button>
  </div>
</div>

<script>
/* ================= DATOS AMPLIADOS (7 CASOS) ================= */
const CASOS = [
  { 
    id:0, type:"HECHO", // Tutorial
    text:"El agua hierve cuando se calienta a 100 grados.", 
    hints:{s:"Libro de Ciencias.", e:"Se puede medir con term√≥metro.", i:"Ense√±ar un dato real."} 
  },
  { 
    id:1, type:"FALSA", 
    text:"¬°Incre√≠ble! Comer piedras te permite volar.", 
    hints:{s:"P√°gina de bromas.", e:"¬°Imposible! Las piedras pesan.", i:"Enga√±arte o hacer re√≠r."} 
  },
  { 
    id:2, type:"HECHO", 
    text:"Par√≠s es la capital de Francia.", 
    hints:{s:"Mapa del mundo oficial.", e:"Es un dato geogr√°fico real.", i:"Informar."} 
  },
  { 
    id:3, type:"OPINION", 
    text:"El helado de chocolate es el mejor del mundo.", 
    hints:{s:"Blog de un ni√±o.", e:"Es un gusto, a otros no les gusta.", i:"Decir lo que le gusta."} 
  },
  { 
    id:4, type:"HECHO", 
    text:"Los tiburones viven en el oc√©ano.", 
    hints:{s:"Documental de animales.", e:"Cient√≠ficos lo han visto.", i:"Ense√±ar sobre naturaleza."} 
  },
  { 
    id:5, type:"OPINION", 
    text:"Esa pel√≠cula es aburrida.", 
    hints:{s:"Un cr√≠tico de cine.", e:"Es lo que √©l sinti√≥, no un dato.", i:"Dar una rese√±a."} 
  },
  { 
    id:6, type:"FALSA", 
    text:"El dinero crece en los √°rboles.", 
    hints:{s:"Dicho popular falso.", e:"Nadie ha visto un √°rbol de monedas.", i:"Es un mito."} 
  }
];

/* ================= ESTADO GLOBAL ================= */
let state = {
  idx: 0,
  score: 0,
  tutorialPhase: 0, 
  isLocked: false
};

/* ================= INICIO ================= */
function initGame() {
  document.getElementById('modal-screen').style.display = 'none';
  loadCard(0);
  startTutorialSequence();
}

function loadCard(index) {
  const c = CASOS[index];
  
  // Fin del juego
  if(!c) {
    document.getElementById('modal-screen').style.display = 'flex';
    document.querySelector('.modal-card h1').textContent = "¬°Misi√≥n Cumplida!";
    document.querySelector('.modal-card p').innerHTML = `Lograste <strong>${state.score}</strong> puntos.<br>¬°Eres un experto de la verdad!`;
    document.querySelector('.big-btn').textContent = "Jugar otra vez";
    document.querySelector('.big-btn').onclick = () => location.reload();
    return;
  }
  
  const card = document.getElementById('card');
  const text = document.getElementById('card-text');
  const stamp = document.getElementById('stamp');
  const num = document.getElementById('case-num');
  
  // Animaci√≥n de entrada
  card.style.transform = 'translateY(100vh) rotate(-10deg)';
  stamp.className = 'stamp'; // Ocultar sello
  
  setTimeout(() => {
    text.textContent = c.text;
    num.textContent = index;
    card.style.transition = '0.6s cubic-bezier(0.34, 1.56, 0.64, 1)'; // Efecto rebote
    card.style.transform = 'translateY(0) rotate(0)';
  }, 100);
}

/* ================= TUTORIAL CON REFLECTOR ================= */
const overlay = document.getElementById('dark-overlay');
const tutoBox = document.getElementById('tuto-box');
const tutoTitle = document.getElementById('tuto-title');
const tutoMsg = document.getElementById('tuto-msg');
const tutoBtn = document.getElementById('tuto-btn');
const arrow = document.getElementById('tuto-arrow');

function startTutorialSequence() {
  state.tutorialPhase = 1;
  overlay.style.display = 'block';
  
  // PASO 1: LEER
  highlightElement('card', "Paso 1: Leer", "Primero lee el mensaje de la tarjeta.", "Ya le√≠", () => {
    state.tutorialPhase = 2;
    highlightElement('tool-bar', "Paso 2: Investigar", "¬°No adivines! Usa la LUPA para ver qui√©n escribi√≥ esto.", null, null);
    tutoBtn.style.display = 'none'; 
    
    // Flecha
    const lupa = document.getElementById('btn-source');
    const rect = lupa.getBoundingClientRect();
    arrow.style.display = 'block';
    arrow.style.left = (rect.right + 10) + 'px';
    arrow.style.top = (rect.top + 10) + 'px';
  });
}

function highlightElement(id, title, msg, btnText, callback) {
  document.querySelectorAll('.spotlight').forEach(el => el.classList.remove('spotlight'));
  const el = document.getElementById(id);
  if(el) el.classList.add('spotlight');
  
  tutoBox.style.display = 'block';
  tutoTitle.textContent = title;
  tutoMsg.textContent = msg;
  
  if(btnText) {
    tutoBtn.style.display = 'inline-block';
    tutoBtn.textContent = btnText;
    tutoBtn.onclick = callback;
  } else {
    tutoBtn.style.display = 'none';
  }
}

function endTutorial() {
  state.tutorialPhase = 0;
  overlay.style.display = 'none';
  tutoBox.style.display = 'none';
  arrow.style.display = 'none';
  document.querySelectorAll('.spotlight').forEach(el => el.classList.remove('spotlight'));
}

/* ================= HERRAMIENTAS ================= */
document.getElementById('btn-source').onclick = () => showHint('s', 'bub-source');
document.getElementById('btn-evidence').onclick = () => showHint('e', 'bub-evidence');
document.getElementById('btn-intent').onclick = () => showHint('i', 'bub-intent');

function showHint(key, bubId) {
  if(state.isLocked) return;
  const hint = CASOS[state.idx].hints[key];
  const bub = document.getElementById(bubId);
  
  document.querySelectorAll('.bubble').forEach(b => b.classList.remove('show'));
  bub.textContent = hint;
  bub.classList.add('show');
  
  // L√≥gica Tutorial
  if(state.tutorialPhase === 2 && key === 's') {
    state.tutorialPhase = 3;
    arrow.style.display = 'none';
    setTimeout(() => {
      highlightElement('bin-bar', "Paso 3: Decidir", "El libro de ciencias dice la verdad. ¬°Es un HECHO! Arrastra la tarjeta a la bandeja VERDE.", "¬°Listo!", () => endTutorial());
    }, 1500);
  }
}

/* ================= JUGABILIDAD ================= */
// CLIC MANUAL
let cardSelected = false;
document.getElementById('card').onclick = () => {
  if(state.tutorialPhase > 0 || state.isLocked) return;
  cardSelected = !cardSelected;
  document.getElementById('card').classList.toggle('selected', cardSelected);
};

function manualClassify(type) {
  if(isDragging) return;
  if(cardSelected || state.tutorialPhase === 0) {
    checkAnswer(type);
    cardSelected = false;
    document.getElementById('card').classList.remove('selected');
  }
}

// DRAG & DROP
const card = document.getElementById('card');
let isDragging = false;
let startX, startY;

card.addEventListener('pointerdown', (e) => {
  if(state.tutorialPhase > 0 || state.isLocked) return;
  isDragging = true;
  card.setPointerCapture(e.pointerId);
  card.style.transition = 'none';
  const rect = card.getBoundingClientRect();
  startX = e.clientX - rect.left;
  startY = e.clientY - rect.top;
});

card.addEventListener('pointermove', (e) => {
  if(!isDragging) return;
  e.preventDefault();
  let x = e.clientX - startX;
  let y = e.clientY - startY;
  
  card.style.position = 'fixed';
  card.style.left = x + 'px';
  card.style.top = y + 'px';
  card.style.transform = 'rotate(5deg) scale(1.1)';
  
  checkHover(e.clientX, e.clientY);
});

card.addEventListener('pointerup', (e) => {
  if(!isDragging) return;
  isDragging = false;
  card.style.position = ''; card.style.left = ''; card.style.top = ''; card.style.transform = ''; card.style.transition = '0.3s';
  
  const type = getDropType(e.clientX, e.clientY);
  if(type) checkAnswer(type);
});

function checkHover(x, y) {
  ['HECHO','OPINION','FALSA'].forEach(t => {
    const el = document.getElementById('bin-'+t.toLowerCase());
    const r = el.getBoundingClientRect();
    if(x > r.left && x < r.right && y > r.top && y < r.bottom) el.classList.add('active');
    else el.classList.remove('active');
  });
}

function getDropType(x, y) {
  let found = null;
  ['HECHO','OPINION','FALSA'].forEach(t => {
    const el = document.getElementById('bin-'+t.toLowerCase());
    el.classList.remove('active');
    const r = el.getBoundingClientRect();
    if(x > r.left && x < r.right && y > r.top && y < r.bottom) found = t;
  });
  return found;
}

/* ================= VERIFICAR Y EFECTOS ================= */
function checkAnswer(userType) {
  if(state.isLocked) return;
  
  const realType = CASOS[state.idx].type;
  const stamp = document.getElementById('stamp');
  
  if(userType === realType) {
    // ACIERTO
    state.isLocked = true;
    stamp.textContent = userType === "HECHO" ? "¬°VERDAD!" : userType === "FALSA" ? "¬°MENTIRA!" : "OPINI√ìN";
    stamp.className = `stamp show ${userType.toLowerCase()}`;
    state.score += 10;
    document.getElementById('score').textContent = state.score;
    triggerConfetti();
    
    setTimeout(() => {
      state.idx++;
      state.isLocked = false;
      loadCard(state.idx);
    }, 2000);
    
  } else {
    // ERROR
    card.animate([
      { transform: 'translateX(0)' },
      { transform: 'translateX(-10px) rotate(-5deg)' },
      { transform: 'translateX(10px) rotate(5deg)' },
      { transform: 'translateX(0)' }
    ], { duration: 400 });
  }
}

function triggerConfetti() {
  for(let i=0; i<30; i++) {
    const c = document.createElement('div');
    c.className = 'confetti';
    c.style.background = ['#ff0000','#00ff00','#0000ff','#ffff00'][Math.floor(Math.random()*4)];
    c.style.left = Math.random()*100 + 'vw';
    c.style.animationDuration = (Math.random()*1 + 1) + 's';
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 2000);
  }
}

</script>
</body>
</html>
